# 技术面试题库

## 一, C++基础与编程范式

1. std::mutex, std::shared_mutex, std::recursive_mutex的区别和使用场景
2. std::condition_variable的虚假唤醒是什么？如何避免？
3. std::promise, std::future, std::async的关系和使用场景
4. C++20的协程(coroutine)原理？co_await, co_yield, co_return的区别？
5. std::string的COW(写时复制)和SSO(小字符串优化)是什么？

### 内存管理

1. new/delete和malloc/free的区别？底层实现原理？
2. 内存对齐的作用？如何控制结构体的内存布局？
3. 智能指针的循环引用如何检测和避免？
4. 你项目中的内存池是如何设计的？优势在哪里？
5. 内存泄漏的检测方法？valgrind, asan的原理？

### 编译与链接

1. 编译的四个阶段是什么？预处理, 编译, 汇编, 链接分别做什么？
2. 静态链接和动态链接的区别？动态库的符号冲突如何解决？
3. ODR(One Definition Rule)是什么？违反会怎样？
4. CMake的target_link_libraries中PRIVATE/PUBLIC/INTERFACE的区别？
5. 模板的编译模型？为什么模板实现要放在头文件？

## 二, 操作系统与系统编程

### 进程与线程

1. 进程和线程的区别？线程的优势和劣势？
2. 线程的上下文切换开销包括哪些？如何减少？
3. 协程和线程的区别？你项目中的协程是有栈还是无栈？
4. 进程的内存布局？栈和堆的增长方向？
5. 孤儿进程, 僵尸进程是什么？如何避免僵尸进程？
6. fork的写时复制(COW)原理？vfork和fork的区别？
7. 线程本地存储(TLS)的实现原理？__thread关键字？

### IPC机制

1. 管道, 命名管道, 消息队列, 共享内存, 信号量的区别和适用场景
2. 共享内存为什么最快？需要注意什么问题？
3. mmap和常规文件读写的区别？内存映射的优势？
4. Unix域套接字和TCP套接字的区别？什么时候用Unix域？
5. 信号的可靠性问题？如何处理信号？信号处理函数中能做什么？

### 同步原语

1. 互斥锁, 读写锁, 自旋锁, 信号量的区别和使用场景
2. 读写锁的实现原理？写优先还是读优先？
3. 条件变量的使用场景？为什么要和mutex配合？
4. futex是什么？相比传统的mutex有什么优势？
5. 无锁编程的原理？CAS的ABA问题如何解决？
6. 死锁的四个必要条件？如何避免死锁？
7. 优先级反转是什么？如何解决？

### I/O模型

1. 阻塞I/O, 非阻塞I/O, I/O多路复用, 信号驱动I/O, 异步I/O的区别
2. select, poll, epoll的区别？epoll为什么高效？
3. epoll的LT和ET模式的区别？什么时候用ET？
4. epoll的实现原理？红黑树和就绪列表的作用？
5. 惊群效应是什么？如何解决？SO_REUSEPORT的作用？
6. 为什么大文件传输要用sendfile？零拷贝的原理？

### 内存管理

1. 虚拟内存的作用？页表的实现？
2. 内存分页和分段的区别？
3. 页面置换算法有哪些？LRU的实现方式？
4. 缺页中断的处理过程？
5. TLB是什么？作用是什么？
6. malloc的底层实现？brk和mmap的区别？
7. 内存碎片的产生和解决方法？
8. NUMA架构是什么？对性能有什么影响？

### 文件系统

1. inode和文件名的关系？硬链接和软链接的区别？
2. 文件描述符的本质是什么？fd的数量限制？
3. 顺序读写和随机读写的性能差异？SSD和HDD的区别？
4. 文件系统的缓存机制？page cache和buffer cache？
5. fsync, fdatasync, sync的区别？
6. O_DIRECT, O_SYNC标志的作用？
7. 文件锁的种类？flock和fcntl的区别？

## 三, 网络编程与TCP/IP

### TCP/IP协议栈

1. OSI七层模型和TCP/IP四层模型的对应关系？
2. TCP三次握手的详细过程？为什么不是两次或四次？
3. TCP四次挥手的详细过程？TIME_WAIT状态的作用？
4. TCP的可靠传输如何保证？超时重传, 快速重传的区别？
5. TCP的流量控制和拥塞控制的区别？滑动窗口的原理？
6. TCP拥塞控制算法有哪些？慢启动, 拥塞避免, 快重传, 快恢复？
7. TCP的粘包问题如何解决？你项目中如何处理？
8. TCP的Nagle算法是什么？什么时候要禁用？
9. TCP_NODELAY和TCP_CORK的区别？
10. TCP的keepalive机制？参数如何设置？

### Socket编程

1. socket编程的完整流程？服务端和客户端分别要调用哪些函数？
2. SO_REUSEADDR和SO_REUSEPORT的区别？
3. 非阻塞socket如何判断connect成功？
4. send/recv返回值的含义？什么情况下会返回0或-1？
5. EINTR, EAGAIN, EWOULDBLOCK的含义和处理方式？
6. 如何优雅关闭socket连接？close和shutdown的区别？
7. 半关闭连接是什么？什么场景需要？

### 高性能网络编程

1. C10K问题是什么？如何解决？
2. Reactor和Proactor模式的区别？
3. 你项目中的协程池是如何设计的？如何调度？
4. 连接复用是什么？HTTP/1.1的长连接和HTTP/2的多路复用区别？
5. 惊群效应在网络编程中如何体现？如何避免？
6. 如何设计一个高性能的网络服务器？从线程模型, I/O模型, 内存管理等方面说明

### HTTP与应用层

1. HTTP/1.0, HTTP/1.1, HTTP/2, HTTP/3的主要区别？
2. HTTP的请求方法有哪些？PUT和POST的区别？
3. HTTP状态码的分类？常见状态码的含义？
4. HTTP的缓存机制？强缓存和协商缓存？
5. HTTPS的握手过程？对称加密和非对称加密的应用？
6. WebSocket和HTTP的区别？什么场景用WebSocket？
7. 你项目中的API网关是如何设计的？如何保证高可用？

## 四, Redis与缓存系统

### Redis基础

1. Redis的数据结构有哪些？底层实现是什么？
2. SDS(简单动态字符串)和C字符串的区别？优势在哪？
3. ziplist, quicklist, listpack的区别和适用场景？
4. 跳表的实现原理？为什么Redis选择跳表而不是红黑树？
5. intset和hashtable的转换条件？
6. Redis的单线程模型？为什么单线程还这么快？
7. Redis 6.0的多线程是怎么回事？哪些操作是多线程？

### 持久化机制

1. RDB和AOF的区别？各自的优缺点？
2. RDB的快照是如何生成的？COW的作用？
3. AOF的三种同步策略？always, everysec, no的区别？
4. AOF重写的原理？如何减少AOF文件大小？
5. 混合持久化是什么？优势在哪？
6. 如何保证Redis数据不丢失？你项目中的配置？

### 内存管理

1. Redis的内存淘汰策略有哪些？LRU, LFU的区别？
2. Redis的过期键删除策略？定期删除和惰性删除？
3. Redis的内存碎片问题？如何解决？
4. 大key问题的影响？如何发现和解决？
5. Redis的内存分配器？jemalloc的优势？

### 缓存问题

1. 缓存穿透, 缓存击穿, 缓存雪崩的区别和解决方案？
2. 如何保证缓存和数据库的一致性？
3. 双写一致性问题的解决方案？先删缓存还是先更新数据库？
4. 缓存预热和缓存更新的策略？
5. 热点key的问题？如何解决？

### 高级特性

1. Redis的事务？WATCH命令的作用？
2. Redis的发布订阅？和消息队列的区别？
3. Redis的Lua脚本？为什么要用Lua？
4. Redis的管道(Pipeline)？和事务的区别？
5. Redis Cluster的分片策略？哈希槽的作用？
6. Redis的主从复制原理？全量同步和增量同步？
7. Redis Sentinel的作用？故障转移的过程？
8. Redis的性能优化？你项目中做了哪些优化？

### 实战应用

1. 如何用Redis实现分布式锁？需要注意什么问题？
2. RedLock算法是什么？有什么问题？
3. 如何用Redis实现延迟队列？

## 五, 数据库原理与PostgreSQL

1. 索引失效的场景有哪些？
2. 覆盖索引是什么？有什么优势？
3. 索引下推是什么？
4. 如何优化慢查询？explain的结果如何分析？

### PostgreSQL特性

1. PostgreSQL和MySQL的主要区别？
2. PostgreSQL的MVCC实现？和MySQL的区别？
3. PostgreSQL的vacuum是什么？为什么需要？
4. PostgreSQL的索引类型？B-tree, Hash, GiST, GIN的区别？
5. JSONB类型的优势？和JSON的区别？
6. PostgreSQL的全文搜索？tsvector和tsquery？

### SQL优化

1. 如何优化JOIN操作？
2. 子查询和JOIN的性能对比？
3. EXISTS和IN的区别？哪个更快？
4. 分页查询的优化？深分页的问题？
5. 数据库连接池的作用？如何设置合适的大小？

## 六, 分布式系统

### 分布式理论

1. CAP定理是什么？如何取舍？
2. BASE理论和ACID的区别？
3. 最终一致性是什么？如何实现？
4. 分布式事务的解决方案？2PC, 3PC, TCC, Saga的区别？
5. 幂等性是什么？如何保证接口幂等？
6. 分布式ID生成方案？雪花算法的原理？
7. 时钟漂移问题？如何解决分布式系统的时间问题？
8. 向量时钟和逻辑时钟是什么？

### 一致性与共识

1. Paxos算法的原理？
2. Raft算法的原理？Leader选举, 日志复制, 安全性？
3. Raft和Paxos的区别？
4. ZAB协议是什么？和Raft的区别？
5. Gossip协议的原理？适用场景？
6. 拜占庭容错是什么？PBFT算法？

### 分布式存储

1. 一致性哈希的原理？虚拟节点的作用？
2. 数据分片的策略？范围分片, 哈希分片, 地理分片？
3. 数据复制的策略？主从复制, 多主复制？
4. 读写分离的问题？主从延迟如何处理？
5. 分布式KV存储的设计？你项目中是如何实现的？
6. LSM树的原理？和B+树的区别？
7. LevelDB/RocksDB的实现原理？
8. 跳表在分布式系统中的应用？

### 消息队列

1. 消息队列的作用？解耦, 削峰, 异步？
2. Kafka的架构？partition, replica, consumer group的概念？
3. Kafka如何保证消息不丢失？
4. Kafka如何保证消息有序？
5. Kafka的高性能原理？零拷贝, 批量发送, 顺序写？
6. RabbitMQ和Kafka的区别？适用场景？
7. 消息队列的重复消费问题？如何解决？

### 服务治理

1. 限流算法有哪些？固定窗口, 滑动窗口, 漏桶, 令牌桶？
2. 令牌桶和漏桶的区别？分别适用什么场景？
3. 你项目中的限流是如何实现的？分布式限流如何做？
4. 熔断降级的原理？熔断的三种状态？
5. 如何设置合理的熔断阈值？
6. 负载均衡的算法？轮询, 随机, 最少连接, 一致性哈希？
7. 你项目中的智能路由是如何实现的？

### 分布式协调

1. Zookeeper的应用场景？
2. Zookeeper的一致性保证？ZAB协议？
3. Zookeeper的watch机制？
4. etcd和Zookeeper的区别？
5. 分布式锁的实现？基于Redis, Zookeeper, 数据库？
6. 分布式锁的问题？死锁, 锁超时, 锁续期？

### Nginx

1. Nginx的工作原理？master-worker模型？
2. Nginx的负载均衡策略？
3. Nginx的反向代理和正向代理的区别？

## 七, 数据结构与算法

1. 滑动窗口算法的应用？
2. 双指针技巧的应用？
3. 动态规划的思想？如何优化空间复杂度？
4. 回溯算法的剪枝策略？
5. 图的遍历算法？BFS, DFS的应用？

### 高级算法

1. 一致性哈希的实现？
2. 限流算法的实现？滑动窗口, 令牌桶？
3. 海量数据处理？Top K, 去重, 排序？
4. 字符串匹配算法？KMP, BM, Sunday？
5. 最短路径算法？Dijkstra, Floyd, Bellman-Ford？

## 八, 项目深度考察

### API网关设计

1. JWT的组成？如何验证？安全性如何保证？
2. JWT和Session的区别？各自的优缺点？
3. 如何实现JWT的刷新机制？
4. 如何屏蔽底层服务差异？协议转换如何实现？
5. API网关的限流如何实现？单机和分布式？
6. 如何设计统一的错误处理机制？
7. API版本管理如何实现？
8. 接口幂等性如何保证？

### 高并发架构

1. 协程池的设计？如何调度？如何处理阻塞操作？
2. 你说单节点支持万级并发, 如何压测验证的？aa
3. 异步I/O模型的实现？和同步I/O的性能对比？
4. 连接复用技术的具体实现？
5. 如何减少上下文切换？具体优化了哪些点？
6. C10K, C10M问题的解决思路？

### 负载均衡

1. 你的智能路由算法的具体实现？
2. GPU利用率如何监控？指标如何收集？
3. 响应延迟如何测量？如何避免测量的开销？
4. 动态调度的频率如何控制？如何避免频繁调度？
5. 热点节点检测算法？
6. 如何处理节点的上下线？

### 限流与熔断

1. 滑动窗口的实现细节？如何保证精确性？
2. 令牌桶算法的实现？如何处理突发流量？
3. 分布式限流如何实现？如何保证全局准确？
4. 健康检查的策略？主动检测和被动检测？
5. 熔断器的状态机如何设计？
6. 降级策略有哪些？如何自动降级？
7. 如何防止流量洪峰引发雪崩？具体措施？

### 缓存架构

1. 进程内缓存用的什么数据结构？如何保证线程安全？
2. 进程内缓存的淘汰策略？
3. 分布式缓存层的架构？
4. 多级缓存的一致性如何保证？
5. 缓存更新策略？Cache Aside, Write Through, Write Back？
6. 热点数据如何识别？
7. 缓存预热如何实现？
8. 如何处理缓存穿透, 击穿, 雪崩？

### 跳表存储引擎

1. 跳表的插入, 删除, 查询的实现？
2. TTL如何实现？定期清理还是惰性清理？
3. 区间查询的实现？
4. 跳表的层数如何确定？随机化策略？
5. 跳表的并发控制？如何加锁？
6. 跳表的内存占用？如何优化？
7. 为什么选择跳表而不是红黑树或B+树？

### 分布式KV存储

1. 一致性哈希的虚拟节点数量如何确定？
2. 根据延迟选择节点的具体算法？
3. 会话亲和性如何实现？如何存储会话信息？
4. 柔性路由降级的触发条件？
5. 主从复制的实现？全量复制和增量复制？
6. 数据分片的粒度？如何处理热点分片？
7. 节点故障时的数据恢复？
8. 如何保证数据的一致性？

### 持久化方案

1. RDB快照的生成策略？fork的开销如何优化？
2. AOF日志的格式？如何保证写入性能？
3. 混合持久化如何切换？
4. 崩溃恢复的流程？如何保证数据完整性？
5. 如何做到亚秒级的数据丢失窗口？
6. 持久化对性能的影响？如何优化？

### 特征存储优化

1. 稀疏特征压缩的算法？压缩率如何？
2. 向量化编码的实现？和标量编码的区别？
3. 批量特征读取的优化？预取策略？
4. 序列化性能如何优化？用的什么序列化协议？

### 嵌入式推理引擎

1. 推理引擎如何嵌入到存储层？
2. 零拷贝流水线的实现？具体如何避免拷贝？
3. 特征读取和推理如何流水线化？
4. 模型格式是什么？如何加载和卸载模型？
5. 多个模型如何管理？模型版本如何控制？
6. 降低端到端延迟的具体数值？优化前后的对比？

### 动态批处理

1. 动态批处理的调度算法？
2. 如何确定批大小上限？
3. 延迟SLA如何定义？如何保证满足SLA？
4. 批处理和延迟的trade-off如何平衡？
5. 并发请求如何聚合？队列结构是什么？
6. 资源利用率如何计算？目标是多少？

### 性能优化

1. 读写锁的粒度如何控制？
2. 锁竞争如何检测？如何优化？
3. 对象内存池的实现？如何避免内存碎片？
4. 内存池的大小如何确定？
5. 多线程并发性能的瓶颈在哪？
6. 如何进行性能测试？QPS, 延迟, 吞吐量的指标？
7. CPU, 内存, 网络, 磁盘的性能分析工具？
8. 火焰图如何使用？如何定位性能热点？

## 十一, 工程实践与工具链

### 版本控制

1. Git的分支管理策略？Git Flow？
2. rebase和merge的区别？
3. 如何回退代码？reset和revert的区别？

### 构建系统

1. CMake的基本概念？target, 库, 可执行文件？
2. CMakeLists.txt如何组织？
3. 如何管理第三方依赖？find_package, FetchContent？
4. 交叉编译如何配置？
5. 如何生成和使用静态库, 动态库？

### 编译工具

1. GCC和Clang的区别？
2. 编译优化选项？-O0, -O1, -O2, -O3的区别？
3. -g, -pg等调试选项的作用？
4. 如何查看符号表？nm, objdump？
5. 如何分析可执行文件？ldd, readelf？

### 调试工具

1. GDB的常用命令？如何设置断点, 查看变量？
2. core dump的生成和分析？
3. 如何调试多线程程序？
4. valgrind的工作原理？如何检测内存泄漏？
5. AddressSanitizer的原理？和valgrind的区别？
6. strace, ltrace的作用？
7. perf的使用？如何生成火焰图？

## 十二, 系统设计题

1. 设计一个高性能的线程池, 需要考虑哪些因素？
2. 设计一个协程调度器, 如何实现？
3. 设计一个内存池, 如何避免内存碎片？
4. 设计一个对象池, 如何保证线程安全？
5. 设计一个高性能日志系统, 如何保证不阻塞业务线程？
6. 设计一个定时器, 如何高效处理大量定时任务？
7. 设计一个简单的RPC框架, 需要哪些组件？
8. 设计一个分布式配置中心, 如何保证高可用？
9. 设计一个分布式限流系统, 如何实现？
10. 设计一个分布式锁服务, 需要考虑哪些问题？
11. 设计一个秒杀系统, 如何应对高并发？
12. 设计一个推荐系统的实时特征计算平台？
13. 设计一个日志收集和分析系统？
14. 设计一个监控告警系统？
15. 设计一个服务注册与发现系统？
16. 设计一个API网关, 需要哪些功能？
17. 设计一个消息推送系统, 如何保证实时性？
18. 设计一个文件存储系统, 如何保证可靠性？
19. 设计一个视频直播系统的架构？
20. 如何设计一个支持百万并发的IM系统？

### 性能问题

1. 服务响应时间突然变慢, 如何排查？
2. CPU使用率100%, 如何定位问题代码？
3. 内存占用持续增长, 如何排查内存泄漏？
4. 网络带宽占用很高, 如何分析？
5. 磁盘I/O很高, 如何优化？
6. 数据库查询慢, 如何优化？
7. Redis性能下降, 如何排查？
8. 如何定位死锁问题？
9. 线程池耗尽, 请求堆积, 如何处理？
10. GC时间过长, 如何优化？

### 可用性问题

1. 服务突然不可用, 如何快速恢复？
2. 数据库主从延迟很大, 如何处理？
3. 缓存失效导致数据库压力大, 如何应对？
4. 某个节点宕机, 如何实现快速故障转移？
5. 网络分区导致脑裂, 如何处理？
6. 消息队列积压, 如何处理？
7. 如何应对DDoS攻击？
8. 如何处理突发流量？
9. 如何应对上游服务超时？
10. 如何处理数据不一致的问题？

### 具体场景

1. 如何实现一个抢红包系统？
2. 如何实现一个排行榜系统？
3. 如何实现一个附近的人功能？
4. 如何实现一个点赞功能（防止重复点赞）？
5. 如何实现一个计数器（准确性, 实时性）？
6. 如何实现分布式事务？
7. 如何实现最终一致性？
8. 如何实现服务降级？
9. 如何实现灰度发布？
10. 如何设计一个幂等接口？

## 十四, 代码实现题

1. 手写线程安全的单例模式
2. 手写生产者-消费者模型
3. 手写读写锁
4. 手写内存池
5. 手写一致性哈希
6. 手写令牌桶限流算法
7. 手写滑动窗口限流算法
8. 手写简单的协程调度器
9. 手写简单的线程池
10. 手写简单的定时器
11. 手写String类
12. 手写简单的JSON解析器
13. 手写简单的HTTP解析器
14. 手写简单的RPC框架
